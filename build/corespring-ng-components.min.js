(function(){var version;version="0.0.17",angular.module("cs.services",[]),angular.module("cs.directives",["cs.services"]),angular.module("cs",["cs.directives"]).value("cs.config",{}),angular.module("cs.directives").directive("aceEditor",["$timeout","Utils",function(a,b){var c;return c={replace:!0,template:"<div/>",link:function(c,d,e){var f,g,h,i,j;return f=b.applyValue,g=function(b){var d,e,f,g;for(e=b.split(","),f=0,g=e.length;g>f;f++)d=e[f],c.$on(d,function(){return a(function(){return c.editor.resize(),null!=c.aceModel?c.editor.getSession().setValue(c.$eval(c.aceModel)):void 0})});return null},i=function(a,b){var d,e,f,g,h;if(null!=b)for(e=0,g=b.length;g>e;e++)d=b[e],c.editor.renderer.removeGutterDecoration(d.lineNumber-1,"ace_failed");if(null!=a)for(f=0,h=a.length;h>f;f++)d=a[f],c.editor.renderer.addGutterDecoration(d.lineNumber-1,"ace_failed");return null},null!=e.aceResizeEvents&&g(e.aceResizeEvents),null!=e.aceExceptions&&c.$watch(e.aceExceptions,i),c.editor=ace.edit(d[0]),c.editor.getSession().setUseWrapMode(!0),j=e.aceTheme||"eclipse",c.editor.setTheme("ace/theme/"+j),c.$watch(e.aceMode,function(a,b){var d,e;if(null!=a&&null!=c.editor&&("js"===a&&(a="javascript"),e=require("ace/mode/"+a),null!=e))return d=e.Mode,c.editor.getSession().setMode(new d),null}),c.aceModel=e.aceModel,c.$watch(c.aceModel,function(b,d){return c.changeFromEditor?void 0:(a(function(){return c.suppressChange=!0,c.editor.getSession().setValue(b),c.suppressChange=!1,null}),null)}),h=c.$eval(c.aceModel),c.editor.getSession().setValue(h),c.editor.getSession().on("change",function(){var a;if(!c.suppressChange)return c.changeFromEditor=!0,a=c.editor.getSession().getValue(),f(c,c.aceModel,a),c.changeFromEditor=!1,null})}}}]),angular.module("cs.directives").directive("buttonBar",["$log",function(a){var b,c;return b=function(a,b,c){return a.selected=function(b){var c;return c=a.getValue(b),a.ngModel&&-1!==a.ngModel.indexOf(c)},a.toggle=function(b){var c,d;return a.ngModel=a.ngModel||[],c=a.getValue(b),d=a.ngModel.indexOf(c),-1===d?a.ngModel.push(c):a.ngModel.splice(d,1)},a.getValue=function(b){return null!=a.key?b[a.key]:b}},c={restrict:"E",link:b,replace:!0,scope:{buttonProvider:"=",ngModel:"=",key:"@"},template:'<div class="btn-group btn-group-justified">\n  <div class="btn-group"\n      ng-repeat="b in buttonProvider" \n      >\n    <button \n      type="button" \n      ng-click="toggle(b)"\n      onmouseout="this.blur()"\n      ng-class="{ active: selected(b)}"\n      class="btn btn-default">{{getValue(b)}}</button>\n    </div>\n</div>'}}]),angular.module("cs.directives").directive("confirmPopup",["$timeout","Utils",function(a,b){var c,d;return d=function(a,c,d,e){return c.addClass("modal hide"),c.find("#confirm").click(function(){return c.modal("hide"),null!=a[d.confirmed]&&a[d.confirmed](),null}),c.find("#cancel").click(function(){return a.$apply(function(){return b.applyValue(a,d.ngModel,a.stashedValue),null}),a.stashedValue=null,c.modal("hide"),null!=a[d.cancelled]&&a[d.cancelled](),null}),a.$watch(d.ngModel,function(b,d){return d===!0&&b===!1&&(a.stashedValue=d,c.modal({show:!0})),null==b&&null!=d?(a.stashedValue=d,c.modal({show:!0})):void 0}),c.on("shown",function(){return c.find("[autofocus]").focus()}),null},c={require:"ngModel",link:d}}]),angular.module("cs.directives").directive("contentEditable",function(){var a,b,c;return a=13,b=9,c={restrict:"A",require:"ngModel",scope:{ngModel:"=",contentId:"@",eventType:"@",removeFocusAfterEdit:"@",validateChange:"&"},link:function(c,d,e){var f,g,h,i;return console.log("removeFocusAfterEdit: "+c.removeFocusAfterEdit),d.attr("contenteditable",""),c.$watch("ngModel",function(a){return d.html(c.ngModel),null}),c.onValidationResult=function(a){return a&&(c.ngModel=d.html()),null},h=function(a){return c.validateChange&&e.validateChange?c.validateChange({text:a,id:c.contentId,callback:c.onValidationResult}):c.onValidationResult(!0)},f=function(d){return"ALL"===c.eventType?!0:"TAB"===c.eventType&&d===b?!0:d===a?!0:void 0},i=function(){return"false"!==c.removeFocusAfterEdit},g="ALL"===c.eventType?"keyup":"keydown",d.bind(g,function(a){var b;return f(a.which)&&(console.log("update allowed...."),b=d.html(),h(b),i()&&d.blur()),null}),d.bind("blur",function(){return d.html(c.ngModel),null})}}}),angular.module("cs.directives").directive("fileDrop",function(a){var b;return b={link:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;return n=function(a){return a.attr("class").split(/\s+/)},g=a[c.onFileDropped],o=n(b),d=c.fileTypes.split(","),m=b[0],e=function(a){var b,c,e;for(c=0,e=d.length;e>c;c++)if(b=d[c],-1!==a.type.indexOf(b))return!0;return!1},h=function(a,c){return function(d){return console.log("drag enter leave"),b.attr("class",o.join(" ")),null!=a&&b.addClass(a),d.stopPropagation(),d.preventDefault(),null!=c&&c(d),null}},i=h(),j=h("over"),l=function(a){var b;return console.log("drop evt:",JSON.parse(JSON.stringify(a.dataTransfer))),b=a.dataTransfer.files,1===b.length&&e(b[0])&&(console.log(b),null!=g&&g(b[0])),null},k=h("",l),f=function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent(b,c,d),null},f(m,"dragleave",i,!1),f(m,"dragover",j,!1),f(m,"drop",k,!1)}}}),XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(a){var b,c,d;return b=function(a){return 255&a.charCodeAt(0)},c=Array.prototype.map.call(a,b),d=new Uint8Array(c),this.send(d.buffer),null}),window.com||(window.com={}),com.ee||(com.ee={}),com.ee.v2||(com.ee.v2={}),com.ee.v2.binaryArrayToString=function(a){var b,c,d,e,f,g;for(c=new Uint8Array(a),b=32768,d=0,e=c.length,f="",g=null;e>d;)g=c.subarray(d,Math.min(d+b,e)),f+=String.fromCharCode.apply(null,g),d+=b;return f},this.com.ee.XHRWrapper=function(){function a(a,b,c,d,e){var f,g,h=this;this.file=a,this.formBody=b,this.url=c,this.name=d,this.options=e,this.options=this.options||{},f=(new Date).getTime(),this.request=new XMLHttpRequest,this.request.upload.index=0,g=null!=this.options.withCredentials?this.options.withCredentials:!0,this.request.withCredentials=g,this.request.upload.file=this.file,this.request.upload.downloadStartTime=f,this.request.upload.currentStart=f,this.request.upload.currentProgress=0,this.request.upload.startData=0,null!=this.options.onUploadProgress&&this.request.upload.addEventListener("progress",this.options.onUploadProgress,!1),null!=this.options.onUploadFailed&&this.request.upload.addEventListener("error",this.options.onUploadFailed,!1),null!=this.options.onUploadCanceled&&this.request.upload.addEventListener("abort",this.options.onUploadCanceled,!1),this.request.open("POST",this.url,!0),this.request.setRequestHeader("Accept","application/json"),this.request.onload=function(){if(-1===[200,201,202,203,204].indexOf(h.request.status)){if(null!=h.options.onUploadFailed)return h.options.onUploadFailed(h.request)}else if(null!=h.options.onUploadComplete)return h.options.onUploadComplete(h.request.responseText,h.request.status)}}return a.prototype.setRequestHeader=function(a,b){return this.request.setRequestHeader(a,b),null},a.prototype.beginUpload=function(){return null!=this.options.onLoadStart&&this.options.onLoadStart(),"string"==typeof this.formBody?this.request.sendAsBinary(this.formBody):this.request.send(this.formBody),null},a}(),this.com.ee.v2.RawFileUploader=function(){function a(a,b,c,d){var e,f=this;this.file=a,this.url=b,this.name=c,this.options=d,e=new FileReader,e.onload=function(a){return f.binaryData=a.target.result,f.xhr=new com.ee.XHRWrapper(f.file,f.binaryData,f.url,f.name,f.options),f.xhr.setRequestHeader("Accept","application/json"),f.xhr.setRequestHeader("Content-Type","application/octet-stream"),f.xhr.beginUpload()},e.readAsArrayBuffer(this.file)}return a}(),this.com.ee.v2.MultipartFileUploader=function(){function a(a,b,c,d){var e,f=this;this.file=a,this.url=b,this.name=c,this.options=d,e=new FileReader,e.onload=function(a){var b,c;return f.binaryData=a.target.result,b="------multipartformboundary-com-ee-mpfu",f.rawData=f.mkBinaryString(f.binaryData),c=f._buildMultipartFormBody(f.file,f.rawData,b),f.xhr=new com.ee.XHRWrapper(f.file,c,f.url,f.name,f.options),f.xhr.setRequestHeader("content-type","multipart/form-data; boundary="+b),f.xhr.setRequestHeader("Accept","application/json"),f.xhr.beginUpload()},e.readAsArrayBuffer(this.file)}return a.prototype.mkBinaryString=function(a){return com.ee.v2.binaryArrayToString(a)},a.prototype._buildMultipartFormBody=function(a,b,c){var d,e,f;return e=new com.ee.MultipartFormBuilder(c),f=this.options.additionalData,d=[{file:a,data:b,paramName:this.name}],e.buildMultipartFormBody(f,d,c)},a}(),this.com.ee.RawFileUploader=function(){function a(a,b,c,d,e){this.file=a,this.binaryData=b,this.url=c,this.name=d,this.options=e,this.xhr=new com.ee.XHRWrapper(this.file,this.binaryData,this.url,this.name,this.options),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("Content-Type","application/octet-stream")}return a.prototype.beginUpload=function(){return this.xhr.beginUpload()},a}(),this.com.ee.MultipartFileUploader=function(){function a(a,b,c,d,e){var f,g,h;this.file=a,this.binaryData=b,this.url=c,this.name=d,this.options=e,h=Math.floor(1e5*Math.random()),f="------multipartformboundary"+h,g=this._buildMultipartFormBody(this.file,this.binaryData,f),this.xhr=new com.ee.XHRWrapper(this.file,g,this.url,this.name,this.options),this.xhr.setRequestHeader("content-type","multipart/form-data; boundary="+f),this.xhr.setRequestHeader("Accept","application/json")}return a.prototype.beginUpload=function(){return this.xhr.beginUpload()},a.prototype._buildMultipartFormBody=function(a,b,c){var d,e,f;return e=new com.ee.MultipartFormBuilder(c),f=this.options.additionalData,d=[{file:a,data:b,paramName:this.name}],e.buildMultipartFormBody(f,d,c)},a}(),window.com||(window.com={}),com.ee||(com.ee={}),this.com.ee.MultipartFormBuilder=function(){function a(a){this.boundary=a,this.dashdash="--",this.crlf="\r\n"}return a.prototype.buildMultipartFormBody=function(a,b){var c,d=this;return c="",null!=a&&$.each(a,function(a,b){return"function"==typeof b&&(b=b()),c+=d.buildFormSegment(a,b)}),null!=b&&$.each(b,function(a,b){return c+=d.buildFileFormSegment(b.paramName,b.file,b.data),null}),c+=this.dashdash,c+=this.boundary,c+=this.dashdash,c+=this.crlf},a.prototype.buildFormSegment=function(a,b){var c;return c=this._buildContentDisposition(a),this._buildFormSegment(c,b)},a.prototype._buildContentDisposition=function(a){var b;return b='Content-Disposition: form-data; name="${name}" ',b.replace("${name}",a)},a.prototype._buildFileContentDisposition=function(a,b){var c;return this.template='Content-Disposition: form-data; name="${formName}"; filename="${fileName}" ',c=this.template.replace("${formName}",a),c=c.replace("${fileName}",b)},a.prototype.buildFileFormSegment=function(a,b,c){var d;return d=this._buildFileContentDisposition(a,b.name),d+=this.crlf,d+="Content-Type: "+b.type,this._buildFormSegment(d,c)},a.prototype._buildFormSegment=function(a,b){var c;return c="",c+=this.dashdash,c+=this.boundary,c+=this.crlf,c+=a,c+=this.crlf,c+=this.crlf,c+=b,c+=this.crlf},a}(),angular.module("cs.directives").directive("fileUploader",function(a){var b;return b={replace:!1,link:function(b,c,d){var e,f,g,h,i,j,k,l,m;return k="multipart","raw"===d.fuMode&&(k="raw"),j=parseInt(d.fuMaxSize)||200,i=1024*j,g="file_upload_input_"+Math.round(1e4*Math.random()),e=null,m=function(){return e.trigger("click")},f=function(){var a;return a="position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; visibility: hidden; padding: 0px; margin: 0px; line-height: 0px;",b.fileInput='<input \n       type="file" \n       id="'+g+'"\n       style="'+a+'" \n       name="'+d.fuName+'">\n</input>',$(c).parent().append(b.fileInput),e=$(c).parent().find("#"+g),e.change(function(a){return h(a)}),null},h=function(a){var b,c,d;return c=a.target.files,b=a.target.files[0],d=new FileReader,d.onloadend=function(a){return l(b,a)},d.readAsBinaryString(b),null},l=function(c,e){var f,g,h,l,m;return c.size>i?(null!=b[d.fuFileSizeGreaterThanMax]&&b[d.fuFileSizeGreaterThanMax](c,j),void a.$broadcast("fileSizeGreaterThanMax",c,j)):(m=d.fuUrl,-1!==d.fuUrl.indexOf("()")&&(f=d.fuUrl.replace("(","").replace(")",""),"function"==typeof b[f]&&(m=b[f](c))),g=d.fuName,h={onLoadStart:function(){return a.$broadcast("uploadStarted")},onUploadComplete:function(c,e){var f;return f=d.fuUploadCompleted,f&&(f.indexOf("(")>=0?b.$eval(f):null!=b[f]&&b[f](c,e)),a.$broadcast("uploadCompleted",c,e)}},l="raw"===k?new com.ee.RawFileUploader(c,e.target.result,m,g,h):new com.ee.MultipartFileUploader(c,e.target.result,m,g,h),l.beginUpload(),null)},f(),c.bind("click",m),null}}}),angular.module("cs.directives").directive("loadingButton",[function(){var a;return a={require:"ngModel",link:function(a,b,c){return a.$watch(c.ngModel,function(a){var c;return c=a?"loading":"reset",$(b).button(c)})}}}]),angular.module("cs.directives").directive("multiSelect",["$timeout","Utils",function(a,b){var c,d,e,f,g;return d='<ul>\n  <li ng-repeat="o in options">\n    <input type="checkbox" id="{{ \'${inputId}-\' + $index}}" ng-model="selectedArr[o.${uidKey}]" ng-click="toggleItem(o)">\n    <label for="{{ \'${inputId}-\' + $index}}">{{multiGetTitle(o)}}</label>\n  </li>\n</ul>',g='<span class="multi-select">\n ${summaryHtml}\n  <div class="chooser" ng-show="showChooser">\n   ${repeater}\n  </div>\n</span>',f=function(a,c,d){var e,f,g,h,i,j;return h=d.multiOptions,i=d.multiUid||"key",g=d.multiModel,f=d.multiGetTitle,e=d.multiChange,a.noneSelected="None selected",a.showChooser=!1,a.$watch(h,function(b){return a.options=b,j(),null}),a.$watch(g,function(b){return null!=b?a.selected=b:a.selected=[],j(),null}),j=function(){var b,c,d,e;if(null==a.selected)return null;for(a.selectedArr={},e=a.selected,c=0,d=e.length;d>c;c++)b=e[c],b[i]&&(a.selectedArr[b[i]]=!0);return null},a.clearItems=function(){return b.applyValue(a,g,[]),j(),null!=e?a[e]():void 0},a.toggleItem=function(c){var d,f,j,k,l;return f=function(a,b){var c,d,e,f;for(d=e=0,f=a.length;f>e;d=++e)if(c=a[d],c[i]&&c[i]===b[i])return d;return-1},null==a.$eval(g)&&b.applyValue(a,g,[]),d=a.$eval(g),j=f(d,c),k=a.$eval(h).indexOf(c),-1===j?d.push(c):d.splice(j,1),l=function(b,c){var d,e;return d=a.$eval(h).indexOf(b),e=a.$eval(h).indexOf(c),d-e},b.applyValue(a,g,d.sort(l)),null!=e&&a[e](),null},a.multiGetTitle=function(b){return a[f](b)},null},c=function(a,b,c){var e,h,i,j,k,l;if(e=""+Math.floor(1e4*Math.random()),l=b.multiUid||"key",h=null,a.find(".summary").each(function(){return h=$(this).clone().wrap("<p>").parent().html()}),k=h,j=null,a.find(".repeater").each(function(){return j=$(this).clone().wrap("<p>").parent().html()}),null==j&&(j=d),null==k)throw"You need to add a summary node to the multi-select: eg: <div id='summary'>...</div>";return k=k.replace(/(<.*?)(>)/,"$1 ng-click='showChooser=!showChooser' $2"),i=g.replace("${repeater}",j).replace(/\$\{uidKey\}/g,l).replace(/\$\{inputId\}/g,""+e+"-"+l).replace("${summaryHtml}",k),a.html(i),f},e={restrict:"A",compile:c,scope:"isolate"}}]),jQuery.expr[":"].matches_ci||(jQuery.expr[":"].matches_ci=function(a,b,c){return jQuery(a).text().toUpperCase()===c[3].toUpperCase()}),angular.module("cs.directives").directive("tagList",function(a){var b;return b={replace:!1,template:"<span/>",link:function(a,b,c){var d,e,f,g,h,i;return i=null,e=null,g=c.tagListLinkClass||"tag-list-link",f=function(){var a,c,d,f;for($(b).html("<span></span>"),d=0,f=e.length;f>d;d++)c=e[d],a=$("<a class='"+g+"' href='javascript:void(0)'>"+c+"</a>"),$(b).append(a),a.click(function(a){return h(a)});return null},d=function(){var a,c,d,e;for($(b).find("."+g).removeClass("selected"),d=0,e=i.length;e>d;d++)c=i[d],a=$(b).find("a:matches_ci('"+c+"')"),a.addClass("selected");return null},h=function(b){var e,f;return f=$(b.target).text(),e=$(b.target).hasClass("selected"),a.$apply(function(){var b,d;return d=a.$eval(c.selectedTags),e?(b=d.indexOf(f),d.splice(b,1)):-1===d.indexOf(f)?d.push(f):void 0}),d(),null},a.$watch(c.selectedTags,function(a){return i=a,null!=e&&null!=i&&d(),null}),a.$watch(c.tags,function(a){return e=a,null!=e&&f(),null!=i&&d(),null}),null}}}),angular.module("cs.directives").directive("whenScrolled",function(){var a;return a=function(a,b,c){var d,e,f,g;return g=b[0],e=function(){var d,e,f;return d=g.getBoundingClientRect(),0!==d.height?(e=b.scrollTop(),f=b.scrollTop()+b.innerHeight(),f>=g.scrollHeight&&a.$apply(c.whenScrolled),null):void 0},f=function(){var b;return b=g.getBoundingClientRect(),0!==b.height?(b.bottom<=window.innerHeight&&a.$apply(c.whenScrolled),null):void 0},d=c.scrolledMode||"window","window"===d?angular.element(window).bind("scroll",f):b.bind("scroll",e),null}}),angular.module("cs.services").factory("Utils",function(){var a;return a={applyValue:function(a,b,c){var d,e,f;if(d=arguments.callee,null==a)throw"Cannot apply to null object the property:  "+b+" with value: "+c;return-1===b.indexOf(".")?a[b]=c:(f=b.split("."),e=f.shift(),d(a[e],f.join("."),c)),null}}})}).call(this),angular.module("cs.directives").directive("collapsablePanel",[function(){"use strict";return{transclude:!0,restrict:"E",template:'<div class="panel" ></div>',controller:function(a,b,c){function d(a){return!a.hasClass("in")}var e;this.toggle=function(){a[e]=!a[e]},c.collapsed&&(e=c.collapsed,a.$watch(e,function(a){var c=b.find(".collapse");d(c)!=a&&c.collapse(a?"hide":"show")}))},link:function(a,b,c,d,e){e(a,function(a){b.find(".panel").append(a)})}}}]).directive("panelHeading",[function(){return{replace:!0,require:"^collapsablePanel",transclude:!0,restrict:"E",scope:{},template:[' <div class="panel-heading">','    <a href ng-click="onClick()" >',"    </a>","</div>"].join("\n"),link:function(a,b,c,d,e){a.onClick=function(){d.toggle()},e(a.$parent,function(a){b.find("a").append(a)})}}}]).directive("panelContent",[function(){return{require:"^collapsablePanel",replace:!0,transclude:!0,restrict:"E",scope:{},template:['<div id="collapse-{{$id}}" class="panel-collapse collapse in">','  <div class="panel-body">',"  </div>","</div>"].join("\n"),link:function(a,b,c,d,e){e(a.$parent,function(a){b.find(".panel-body").append(a)})}}}]);